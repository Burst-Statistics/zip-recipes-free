jQuery(document).ready(function(d){d(".zrdn-recipe-save-button .button-primary").show();var a=top.tinymce.activeEditor.windowManager.getParams();var c=a.editor;var b=a.width;if(d(".zrdn-recipe-image").length){var e=d(".zrdn-recipe-image").parent().html();d("#general").prepend('<div id="zrdn-popup-image">'+e+"</div>");d("#zrdn-popup-image").append('<div class="zrdn-edit-image-text">'+zrdn_editor.str_click_to_edit_image+"</div>")}d("#recipe-settings").submit(function(){return false});d(".zrdn-recipe-save-button .button.exit").each(function(g){var f=d(".zrdn-recipe-save-button .button.save").width()+30;d(this).css("right",f+"px")});d(document).on("click",".zrdn-recipe-save-button .button",function(m){var h=d(this);var l=h.html();d(".is-required").each(function(i){if(d(this).val().length==0){d("#zrdn-show-field-error").show();i.preventDefault();return}});for(var g=0;g<tinymce.editors.length;g++){var n=tinymce.editors[g].id;var k=tinymce.editors[g].getContent();d("textarea[name="+n+"]").val(k)}var j=d("input[name=zrdn_recipe_id]").val();var f=d("#recipe-settings").serializeArray();h.html("...");h.html('<div class="zrdn-loader zrdn-loader-white"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>');d.ajax({type:"POST",url:zrdn_editor.admin_url,dataType:"json",data:({formdata:f,recipe_id:j,nonce:zrdn_editor.nonce,action:"zrdn_update_recipe_from_popup"}),success:function(i){if(i.success){d("#zrdn-show-field-error").hide();if(d("#nutrition_save_recipe_first").length){d("#nutrition_save_recipe_first").hide();d("#nutrition_action_buttons").show()}j=i.recipe_id;var o="[amd-zlrecipe-recipe:"+j+"]";var p=c.dom.select("img.amd-zlrecipe-recipe")[0];if(p){c.selection.select(p)}c.execCommand("mceInsertContent",false,o);if(h.hasClass("exit")){top.tinymce.activeEditor.windowManager.close(window)}h.html(l)}}})})});