/*! tether-shepherd 1.8.1 */
(function(d,c){if(typeof define==="function"&&define.amd){define(["tether"],c)}else{if(typeof exports==="object"){module.exports=c(require("tether"))}else{d.Shepherd=c(d.Tether)}}}(this,function(T){var E=(function(){function a(b,d){for(var e=0;e<d.length;e++){var c=d[e];c.enumerable=c.enumerable||false;c.configurable=true;if("value" in c){c.writable=true}Object.defineProperty(b,c.key,c)}}return function(b,d,c){if(d){a(b.prototype,d)}if(c){a(b,c)}return b}})();var Z=function B(i,j,b){var h=true;_function:while(h){var c=i,e=j,d=b;h=false;if(c===null){c=Function.prototype}var a=Object.getOwnPropertyDescriptor(c,e);if(a===undefined){var f=Object.getPrototypeOf(c);if(f===null){return undefined}else{i=f;j=e;b=d;h=true;a=f=undefined;continue _function}}else{if("value" in a){return a.value}else{var g=a.get;if(g===undefined){return undefined}return g.call(d)}}}};function U(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function G(b,a){if(typeof a!=="function"&&a!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:false,writable:true,configurable:true}});if(a){Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a}}var V=T.Utils;var H=V.Evented;var O=V.addClass;var C=V.extend;var X=V.hasClass;var K=V.removeClass;var Q=V.uniqueId;var F=new H();function W(a){return typeof a==="undefined"}function P(a){return a&&a.constructor===Array}function R(a){return a&&a.constructor===Object}function A(a){return typeof a==="object"}var I={"top right":"bottom left","top left":"bottom right","top center":"bottom center","middle right":"middle left","middle left":"middle right","middle center":"middle center","bottom left":"top right","bottom right":"top left","bottom center":"top center",top:"bottom center",left:"middle right",right:"middle left",bottom:"top center",center:"middle center",middle:"middle center"};function D(a){var b=document.createElement("div");b.innerHTML=a;return b.children[0]}function Y(a,b){var c=undefined;if(!W(a.matches)){c=a.matches}else{if(!W(a.matchesSelector)){c=a.matchesSelector}else{if(!W(a.msMatchesSelector)){c=a.msMatchesSelector}else{if(!W(a.webkitMatchesSelector)){c=a.webkitMatchesSelector}else{if(!W(a.mozMatchesSelector)){c=a.mozMatchesSelector}else{if(!W(a.oMatchesSelector)){c=a.oMatchesSelector}}}}}}return c.call(a,b)}var L=/^(.+) (top|left|right|bottom|center|\[[a-z ]+\])$/;function J(b){if(A(b)){if(b.hasOwnProperty("element")&&b.hasOwnProperty("on")){return b}return null}var c=L.exec(b);if(!c){return null}var a=c[2];if(a[0]==="["){a=a.substring(1,a.length-1)}return{element:c[1],on:a}}function M(b,d){if(b===null||W(b)){return b}else{if(A(b)){return b}}var c=b.split(" ");var f={};var a=d.length-1;for(var e=c.length-1;e>=0;e--){if(a===0){f[d[a]]=c.slice(0,e+1).join(" ");break}else{f[d[a]]=c[e]}a--}return f}var N=(function(r){G(k,r);function k(t,u){U(this,k);Z(Object.getPrototypeOf(k.prototype),"constructor",this).call(this,t,u);this.tour=t;this.bindMethods();this.setOptions(u);return this}E(k,[{key:"bindMethods",value:function e(){var t=this;var u=["_show","show","hide","isOpen","cancel","complete","scrollTo","destroy","render"];u.map(function(v){t[v]=t[v].bind(t)})}},{key:"setOptions",value:function d(){var ac=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.options=ac;this.destroy();this.id=this.options.id||this.id||"step-"+Q();var v=this.options.when;if(v){for(var y in v){if(({}).hasOwnProperty.call(v,y)){var t=v[y];this.on(y,t,this)}}}var aa=JSON.stringify(this.options.buttons);var x=W(aa)||aa==="true";var w=aa==="{}"||aa==="[]"||aa==="null"||aa==="false";var u=!x&&P(this.options.buttons);var z=!x&&R(this.options.buttons);if(x){this.options.buttons=[{text:"Next",action:this.tour.next,classes:"btn"}]}else{if(!w&&z){this.options.buttons=[this.options.buttons]}else{if(w||!u){this.options.buttons=false}}}}},{key:"getTour",value:function f(){return this.tour}},{key:"bindAdvance",value:function n(){var x=this;var t=M(this.options.advanceOn,["selector","event"]);var u=t.event;var w=t.selector;var v=function v(y){if(!x.isOpen()){return}if(!W(w)){if(Y(y.target,w)){x.tour.next()}}else{if(x.el&&y.target===x.el){x.tour.next()}}};document.body.addEventListener(u,v);this.on("destroy",function(){return document.body.removeEventListener(u,v)})}},{key:"getAttachTo",value:function l(){var t=J(this.options.attachTo)||{};var u=C({},t);if(typeof t.element==="string"){u.element=document.querySelector(t.element);if(!u.element){console.error("The element for this Shepherd step was not found "+t.element)}}return u}},{key:"setupTether",value:function g(){if(W(T)){throw new Error("Using the attachment feature of Shepherd requires the Tether library")}var u=this.getAttachTo();var t=I[u.on]||I.right;if(W(u.element)){u.element="viewport";t="middle center"}var v={classPrefix:"shepherd",element:this.el,constraints:[{to:"window",pin:true,attachment:"together"}],target:u.element,offset:u.offset||"0 0",attachment:t};if(this.tether){this.tether.destroy()}this.tether=new T(C(v,this.options.tetherOptions))}},{key:"show",value:function c(){var u=this;if(!W(this.options.beforeShowPromise)){var t=this.options.beforeShowPromise();if(!W(t)){return t.then(function(){return u._show()})}}this._show()}},{key:"_show",value:function j(){var t=this;this.trigger("before-show");if(!this.el){this.render()}O(this.el,"shepherd-open");document.body.setAttribute("data-shepherd-step",this.id);this.setupTether();if(this.options.scrollTo){setTimeout(function(){t.scrollTo()})}this.trigger("show")}},{key:"hide",value:function m(){this.trigger("before-hide");K(this.el,"shepherd-open");document.body.removeAttribute("data-shepherd-step");if(this.tether){this.tether.destroy()}this.tether=null;this.trigger("hide")}},{key:"isOpen",value:function h(){return this.el&&X(this.el,"shepherd-open")}},{key:"cancel",value:function o(){this.tour.cancel();this.trigger("cancel")}},{key:"complete",value:function i(){this.tour.complete();this.trigger("complete")}},{key:"scrollTo",value:function q(){var t=this.getAttachTo();var u=t.element;if(!W(this.options.scrollToHandler)){this.options.scrollToHandler(u)}else{if(!W(u)){u.scrollIntoView()}}}},{key:"destroy",value:function b(){if(!W(this.el)&&this.el.parentNode){this.el.parentNode.removeChild(this.el);delete this.el}if(this.tether){this.tether.destroy()}this.tether=null;this.trigger("destroy")}},{key:"render",value:function a(){var w=this;if(!W(this.el)){this.destroy()}this.el=D("<div class='shepherd-step "+(this.options.classes||"")+"' data-id='"+this.id+"' "+(this.options.idAttribute?'id="'+this.options.idAttribute+'"':"")+"></div>");var u=document.createElement("div");u.className="shepherd-content";this.el.appendChild(u);var t=document.createElement("header");u.appendChild(t);if(this.options.title){t.innerHTML+="<h3 class='shepherd-title'>"+this.options.title+"</h3>";this.el.className+=" shepherd-has-title"}if(this.options.showCancelLink){var v=D("<a href class='shepherd-cancel-link'>âœ•</a>");t.appendChild(v);this.el.className+=" shepherd-has-cancel-link";this.bindCancelLink(v)}if(!W(this.options.text)){(function(){var x=D("<div class='shepherd-text'></div>");var y=w.options.text;if(typeof y==="function"){y=y.call(w,x)}if(y instanceof HTMLElement){x.appendChild(y)}else{if(typeof y==="string"){y=[y]}y.map(function(z){x.innerHTML+="<p>"+z+"</p>"})}u.appendChild(x)})()}if(this.options.buttons){(function(){var x=document.createElement("footer");var y=D("<ul class='shepherd-buttons'></ul>");w.options.buttons.map(function(aa){var z=D("<li><a class='shepherd-button "+(aa.classes||"")+"'>"+aa.text+"</a>");y.appendChild(z);w.bindButtonEvents(aa,z.querySelector("a"))});x.appendChild(y);u.appendChild(x)})()}document.body.appendChild(this.el);this.setupTether();if(this.options.advanceOn){this.bindAdvance()}}},{key:"bindCancelLink",value:function p(t){var u=this;t.addEventListener("click",function(v){v.preventDefault();u.cancel()})}},{key:"bindButtonEvents",value:function s(v,t){var w=this;v.events=v.events||{};if(!W(v.action)){v.events.click=v.action}for(var x in v.events){if(({}).hasOwnProperty.call(v.events,x)){var u=v.events[x];if(typeof u==="string"){(function(){var y=u;u=function(){return w.tour.show(y)}})()}t.addEventListener(x,u)}}this.on("destroy",function(){for(var y in v.events){if(({}).hasOwnProperty.call(v.events,y)){var z=v.events[y];t.removeEventListener(y,z)}}})}}]);return k})(H);var S=(function(f){G(j,f);function j(){var r=this;var q=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];U(this,j);Z(Object.getPrototypeOf(j.prototype),"constructor",this).call(this,q);this.bindMethods();this.options=q;this.steps=this.options.steps||[];var p=["complete","cancel","hide","start","show","active","inactive"];p.map(function(s){(function(t){r.on(t,function(u){u=u||{};u.tour=r;F.trigger(t,u)})})(s)});return this}E(j,[{key:"bindMethods",value:function d(){var p=this;var q=["next","back","cancel","complete","hide"];q.map(function(r){p[r]=p[r].bind(p)})}},{key:"addStep",value:function a(q,p){if(W(p)){p=q}if(!(p instanceof N)){if(typeof q==="string"||typeof q==="number"){p.id=q.toString()}p=C({},this.options.defaults,p);p=new N(this,p)}else{p.tour=this}this.steps.push(p);return this}},{key:"removeStep",value:function o(s){var p=this.getCurrentStep();for(var r=0;r<this.steps.length;++r){var q=this.steps[r];if(q.id===s){if(q.isOpen()){q.hide()}q.destroy();this.steps.splice(r,1);break}}if(p&&p.id===s){this.currentStep=undefined;if(this.steps.length){this.show(0)}else{this.hide()}}}},{key:"getById",value:function e(p){for(var r=0;r<this.steps.length;++r){var q=this.steps[r];if(q.id===p){return q}}}},{key:"getCurrentStep",value:function g(){return this.currentStep}},{key:"next",value:function l(){var p=this.steps.indexOf(this.currentStep);if(p===this.steps.length-1){this.hide(p);this.trigger("complete");this.done()}else{this.show(p+1,true)}}},{key:"back",value:function m(){var p=this.steps.indexOf(this.currentStep);this.show(p-1,false)}},{key:"cancel",value:function h(){if(this.currentStep){this.currentStep.hide()}this.trigger("cancel");this.done()}},{key:"complete",value:function b(){if(this.currentStep){this.currentStep.hide()}this.trigger("complete");this.done()}},{key:"hide",value:function k(){if(this.currentStep){this.currentStep.hide()}this.trigger("hide");this.done()}},{key:"done",value:function n(){F.activeTour=null;K(document.body,"shepherd-active");this.trigger("inactive",{tour:this})}},{key:"show",value:function i(){var q=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var r=arguments.length<=1||arguments[1]===undefined?true:arguments[1];if(this.currentStep){this.currentStep.hide()}else{O(document.body,"shepherd-active");this.trigger("active",{tour:this})}F.activeTour=this;var p=undefined;if(typeof q==="string"){p=this.getById(q)}else{p=this.steps[q]}if(p){if(!W(p.options.showOn)&&!p.options.showOn()){var s=this.steps.indexOf(p);var t=r?s+1:s-1;this.show(t,r)}else{this.trigger("show",{step:p,previous:this.currentStep});if(this.currentStep){this.currentStep.hide()}this.currentStep=p;p.show()}}}},{key:"start",value:function c(){this.trigger("start");this.currentStep=null;this.next()}}]);return j})(H);C(F,{Tour:S,Step:N,Evented:H});return F}));